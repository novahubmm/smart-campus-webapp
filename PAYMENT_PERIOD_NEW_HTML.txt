<!-- Payment Period Selection - Per Fee Type -->
<div>
    <label class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-3">{{ __('finance.Payment Period') }}</label>
    <p class="text-xs text-gray-500 dark:text-gray-400 mb-3">{{ __('finance.Select payment period for each fee type') }}</p>
    
    <!-- Fee-specific payment period selection -->
    <div class="space-y-3">
        <template x-for="(fee, index) in paymentData.fees" :key="fee.id">
            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800">
                <div class="flex items-center justify-between mb-2">
                    <div>
                        <p class="font-medium text-sm text-gray-900 dark:text-white" x-text="fee.fee_name"></p>
                        <p class="text-xs text-gray-500" x-text="'{{ __('finance.Due') }}: ' + formatDueDate(fee.due_date)"></p>
                    </div>
                    <span class="text-xs font-semibold text-gray-600 dark:text-gray-400" x-text="fee.remaining_amount.toLocaleString() + ' MMK/{{ __('finance.month') }}'"></span>
                </div>
                
                <!-- Payment period options for this fee -->
                <div class="grid grid-cols-3 gap-2">
                    <template x-for="option in paymentPeriodOptions" :key="option.months">
                        <label class="relative flex flex-col p-2 border-2 rounded-lg cursor-pointer transition-all text-center" :class="fee.payment_months == option.months ? 'border-teal-500 bg-teal-50 dark:bg-teal-900/20' : 'border-gray-300 dark:border-gray-600 hover:border-teal-300'">
                            <input type="radio" :name="'fee_months_' + fee.id" :value="option.months" x-model.number="fee.payment_months" @change="updatePaymentCalculation" class="sr-only">
                            <div class="flex flex-col items-center">
                                <span class="font-bold text-base text-gray-900 dark:text-white" x-text="option.months"></span>
                                <span class="text-xs text-gray-600 dark:text-gray-400" x-text="option.months === 1 ? '{{ __('finance.month') }}' : '{{ __('finance.months') }}'"></span>
                                <template x-if="option.discount_percent > 0 && fee.fee_name && fee.fee_name.toLowerCase().includes('school fee')">
                                    <span class="text-xs font-medium text-green-600 dark:text-green-400 mt-1" x-text="'-' + option.discount_percent + '%'"></span>
                                </template>
                            </div>
                        </label>
                    </template>
                </div>
            </div>
        </template>
    </div>
</div>
